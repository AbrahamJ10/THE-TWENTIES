<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Almac√©n | THE TWENTIES</title>
    <link rel="stylesheet" href="dashboard.css" />
  </head>

  <body>
    <!-- =================== SIDEBAR =================== -->
    <aside class="menu">
      <h2>THE TWENTIES</h2>
      <ul>
        <li><a href="usuarios.html">Usuario</a></li>
        <li class="active"><a href="almacen.html">Almac√©n</a></li>
        <li><a href="configuracion.html">Configuraci√≥n</a></li>
        <li>
          <button id="btnSalir" class="btn-salir" title="Cerrar sesi√≥n">
            ‚éã Salir
          </button>
        </li>
      </ul>
    </aside>

    <!-- =================== MAIN CONTENT =================== -->
    <main>
      <h1>Lista de productos</h1>

      <!-- üîç Filtro de b√∫squeda -->
      <div class="filtro">
        <input
          type="text"
          id="filtroProducto"
          placeholder="Buscar por nombre, categor√≠a o descripci√≥n..."
          aria-label="Buscar producto"
        />
      </div>

      <!-- üìã Tabla de productos -->
      <div class="tabla-contenedor">
        <table id="tablaAlmacen">
          <thead>
            <tr>
              <th>COD</th>
              <th>FECHA</th>
              <th>NOMBRE</th>
              <th>DESCRIPCI√ìN</th>
              <th>CATEGOR√çA</th>
              <th>STOCK</th>
              <th>COSTO</th>
              <th>IMAGEN</th>
              <th>EDITAR</th>
              <th>ELIMINAR</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- ‚ûï Bot√≥n debajo de la tabla -->
      <div class="acciones">
        <button id="btnAgregarProducto" class="btn agregar">
          + Agregar nuevo producto
        </button>
      </div>

      <!-- üß± Contenedor del modal -->
      <div id="modalContainer"></div>
    </main>

    <!-- =================== SCRIPTS =================== -->
    <script src="/js/almacen.js" defer></script>
    <script>
      // === FILTRO DE PRODUCTOS ===
      document.addEventListener("DOMContentLoaded", () => {
        const filtro = document.getElementById("filtroProducto");

        filtro.addEventListener("input", () => {
          const texto = filtro.value.toLowerCase();
          const filtrados = (window.productosCache || []).filter(
            (p) =>
              (p.nombre || "").toLowerCase().includes(texto) ||
              (p.descripcion || "").toLowerCase().includes(texto) ||
              (p.categoria || "").toLowerCase().includes(texto)
          );
          if (typeof renderProductos === "function") {
            renderProductos(filtrados);
          }
        });

        // === BOT√ìN SALIR ===
        document.getElementById("btnSalir").addEventListener("click", () => {
          window.location.href = "/index.html";
        });
      });
    </script>
  </body>
</html>
